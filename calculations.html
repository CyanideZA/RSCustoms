<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Car Wash - Business Calculator</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Cinzel', 'Times New Roman', serif;
        }

        body {
            background:
                    radial-gradient(circle at 20% 30%, rgba(10, 30, 60, 0.4) 0%, transparent 40%),
                    radial-gradient(circle at 80% 70%, rgba(20, 40, 80, 0.4) 0%, transparent 40%),
                    linear-gradient(135deg, #0a0e14 0%, #1a2436 50%, #0a0e14 100%);
            color: #e0d3b8;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                    url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="none"/><path d="M0,50 L100,50 M50,0 L50,100" stroke="rgba(120, 100, 60, 0.05)" stroke-width="1"/></svg>'),
                    linear-gradient(0deg, transparent 24%, rgba(120, 100, 60, 0.05) 25%, rgba(120, 100, 60, 0.05) 26%, transparent 27%, transparent 74%, rgba(120, 100, 60, 0.05) 75%, rgba(120, 100, 60, 0.05) 76%, transparent 77%, transparent);
            background-size: 50px 50px, 100% 100%;
            pointer-events: none;
            z-index: 0;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 25px;
            background:
                    radial-gradient(ellipse at center, rgba(20, 40, 80, 0.4) 0%, transparent 70%),
                    url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="60" viewBox="0 0 200 60"><path d="M20,30 Q100,0 180,30 Q100,60 20,30Z" fill="rgba(120, 100, 60, 0.1)"/></svg>') center center no-repeat;
            border-bottom: 3px solid #785a28;
            position: relative;
            border-image: linear-gradient(to right, transparent, #785a28, transparent) 1;
        }

        .header::before, .header::after {
            content: "⚔️";
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 24px;
            opacity: 0.6;
        }

        .header::before {
            left: 50px;
        }

        .header::after {
            right: 50px;
        }

        h1 {
            font-size: 2.8rem;
            color: #ffd700;
            text-shadow:
                    0 0 10px rgba(255, 215, 0, 0.5),
                    0 0 20px rgba(255, 215, 0, 0.3),
                    2px 2px 0 #785a28,
                    4px 4px 0 #0a0e14;
            margin-bottom: 5px;
            letter-spacing: 3px;
            text-transform: uppercase;
            font-weight: 700;
        }

        .subtitle {
            font-size: 1.1rem;
            color: #b8ab8c;
            text-shadow: 1px 1px 2px #0a0e14;
            letter-spacing: 2px;
            margin-top: 5px;
        }

        /* Main Calculator Grid */
        .calculator-grid {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 25px;
            margin-bottom: 30px;
        }

        /* Control Panel */
        .control-panel {
            background: linear-gradient(145deg, rgba(20, 30, 50, 0.8), rgba(10, 20, 40, 0.9));
            border: 2px solid #4a3c20;
            border-radius: 10px;
            padding: 25px;
            box-shadow:
                    inset 0 0 20px rgba(0, 0, 0, 0.5),
                    0 5px 25px rgba(0, 0, 0, 0.7);
            position: relative;
            overflow: hidden;
        }

        .control-panel::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(to right, transparent, #ffd700, transparent);
        }

        .panel-title {
            color: #ffd700;
            font-size: 1.4rem;
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 1px 1px 2px #0a0e14;
            border-bottom: 2px solid #785a28;
            padding-bottom: 10px;
            position: relative;
        }

        .panel-title::after {
            content: "✦";
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
        }

        .panel-title::before {
            content: "✦";
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
        }

        /* Global Variables */
        .global-vars {
            background: rgba(30, 40, 70, 0.5);
            border: 1px solid #3a2c10;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
        }

        .var-item {
            margin-bottom: 20px;
        }

        .var-label {
            color: #b8ab8c;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
        }

        .var-value {
            color: #ffd700;
            font-size: 1.1rem;
            font-weight: bold;
        }

        /* Slider Styling */
        .slider-container {
            position: relative;
            margin-top: 5px;
        }

        .slider {
            width: 100%;
            height: 10px;
            -webkit-appearance: none;
            appearance: none;
            background: rgba(20, 20, 30, 0.8);
            border: 1px solid #3a2c10;
            border-radius: 5px;
            outline: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            background: linear-gradient(to bottom, #ffd700, #b89400);
            border: 2px solid #785a28;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            background: linear-gradient(to bottom, #ffd700, #b89400);
            border: 2px solid #785a28;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        /* Expansion Tiers */
        .expansion-tiers {
            background: rgba(30, 40, 70, 0.5);
            border: 1px solid #3a2c10;
            border-radius: 8px;
            padding: 20px;
            margin-top: 25px;
        }

        .tier-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .tier-button {
            background: linear-gradient(to bottom, #3a2c10, #2a1c00);
            border: 2px solid #5d4b20;
            color: #b8ab8c;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 5px;
            font-size: 0.9rem;
        }

        .tier-button:hover {
            border-color: #ffd700;
            color: #ffd700;
        }

        .tier-button.active {
            background: linear-gradient(to bottom, #5d4b20, #4a3c20);
            border-color: #ffd700;
            color: #ffd700;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
        }

        /* Results Panel */
        .results-panel {
            background: linear-gradient(145deg, rgba(20, 30, 50, 0.8), rgba(10, 20, 40, 0.9));
            border: 2px solid #4a3c20;
            border-radius: 10px;
            padding: 25px;
            box-shadow:
                    inset 0 0 20px rgba(0, 0, 0, 0.5),
                    0 5px 25px rgba(0, 0, 0, 0.7);
            position: relative;
            overflow: hidden;
        }

        .results-panel::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(to right, transparent, #ffd700, transparent);
        }

        /* Financial Breakdown */
        .financial-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-top: 25px;
        }

        .financial-section {
            background: rgba(30, 40, 70, 0.5);
            border: 1px solid #3a2c10;
            border-radius: 8px;
            padding: 20px;
        }

        .section-title {
            color: #ffd700;
            font-size: 1.2rem;
            margin-bottom: 15px;
            text-align: center;
            border-bottom: 1px solid #785a28;
            padding-bottom: 8px;
        }

        .cost-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px dashed rgba(120, 90, 40, 0.3);
        }

        .cost-label {
            color: #b8ab8c;
            font-size: 0.95rem;
        }

        .cost-amount {
            color: #ffd700;
            font-weight: bold;
            font-size: 1.05rem;
        }

        .cost-total {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid #785a28;
            font-size: 1.1rem;
        }

        .total-label {
            color: #b8ab8c;
            font-weight: bold;
        }

        .total-amount {
            color: #ffd700;
            font-weight: bold;
            font-size: 1.2rem;
        }

        /* Profit Display */
        .profit-display {
            margin-top: 30px;
            background: linear-gradient(145deg, rgba(40, 60, 40, 0.7), rgba(20, 40, 20, 0.8));
            border: 2px solid #3a5f0b;
            border-radius: 10px;
            padding: 25px;
            text-align: center;
        }

        .profit-title {
            color: #8bc34a;
            font-size: 1.3rem;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .profit-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .profit-item {
            background: rgba(30, 40, 30, 0.6);
            border: 1px solid #2a4f0b;
            border-radius: 8px;
            padding: 15px;
        }

        .profit-period {
            color: #b8ab8c;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }

        .profit-amount {
            color: #8bc34a;
            font-size: 1.8rem;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(139, 195, 74, 0.3);
        }

        .profit-negative {
            color: #ff5252;
        }

        /* Controls */
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }

        .skyrim-button {
            background: linear-gradient(to bottom, #5d4b20, #3a2c10);
            border: 2px solid #785a28;
            color: #ffd700;
            padding: 12px 25px;
            font-size: 1rem;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            border-radius: 5px;
            min-width: 180px;
        }

        .skyrim-button:hover {
            background: linear-gradient(to bottom, #6d5b30, #4a3c20);
            border-color: #ffd700;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3);
        }

        .skyrim-button:active {
            transform: translateY(1px);
        }

        .skyrim-button::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .skyrim-button:hover::before {
            left: 100%;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(20, 30, 50, 0.5);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(to bottom, #5d4b20, #785a28);
            border-radius: 4px;
        }

        /* Responsive */
        @media (max-width: 1100px) {
            .calculator-grid {
                grid-template-columns: 1fr;
            }

            .financial-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .profit-grid {
                grid-template-columns: 1fr;
            }

            .tier-buttons {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 2.2rem;
            }

            .header::before, .header::after {
                display: none;
            }
        }

        /* Input styling */
        input[type="number"] {
            background: rgba(20, 30, 50, 0.7);
            border: 1px solid #5d4b20;
            color: #ffd700;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 1rem;
            width: 100px;
            text-align: center;
        }

        input[type="number"]:focus {
            outline: none;
            border-color: #ffd700;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }

        /* Info boxes */
        .info-box {
            background: rgba(40, 50, 80, 0.5);
            border: 1px solid #5d4b20;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            font-size: 0.9rem;
            color: #b8ab8c;
            line-height: 1.5;
        }

        .highlight {
            color: #ffd700;
            font-weight: bold;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&display=swap" rel="stylesheet">
</head>
<body>
<div class="container">
    <div class="header">
        <h1>Car Wash Business Calculator</h1>
        <div class="subtitle">SKYRIM EDITION - FINANCIAL FORECASTING TOOL</div>
    </div>

    <div class="calculator-grid">
        <!-- Left: Control Panel -->
        <div class="control-panel">
            <div class="panel-title">CONTROL PANEL</div>

            <div class="global-vars">
                <div class="var-item">
                    <div class="var-label">
                        <span>Number of Bays</span>
                        <span class="var-value" id="bays-display">2</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" min="2" max="8" value="2" step="2" class="slider" id="bays-slider">
                        <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                            <span style="font-size: 0.8rem; color: #b8ab8c;">2 Bays</span>
                            <span style="font-size: 0.8rem; color: #b8ab8c;">8 Bays</span>
                        </div>
                    </div>
                </div>

                <div class="var-item">
                    <div class="var-label">
                        <span>Cars Per Day (Per Bay)</span>
                        <span class="var-value" id="cars-per-day-display">8</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" min="4" max="20" value="8" class="slider" id="cars-slider">
                        <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                            <span style="font-size: 0.8rem; color: #b8ab8c;">4</span>
                            <span style="font-size: 0.8rem; color: #b8ab8c;">20</span>
                        </div>
                    </div>
                </div>

                <div class="var-item">
                    <div class="var-label">
                        <span>Average Price per Car</span>
                        <span class="var-value">R150</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" min="80" max="250" value="150" step="10" class="slider" id="price-slider">
                        <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                            <span style="font-size: 0.8rem; color: #b8ab8c;">R80</span>
                            <span style="font-size: 0.8rem; color: #b8ab8c;">R250</span>
                        </div>
                    </div>
                </div>

                <div class="var-item">
                    <div class="var-label">
                        <span>Operating Days per Month</span>
                        <span class="var-value">30</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" min="20" max="30" value="30" class="slider" id="days-slider">
                        <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                            <span style="font-size: 0.8rem; color: #b8ab8c;">20</span>
                            <span style="font-size: 0.8rem; color: #b8ab8c;">30</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="expansion-tiers">
                <div class="panel-title" style="font-size: 1.2rem;">EXPANSION TIERS</div>
                <div class="tier-buttons">
                    <div class="tier-button active" data-tier="0">Tier 0<br>2 Bays (Startup)</div>
                    <div class="tier-button" data-tier="1">Tier 1<br>4 Bays</div>
                    <div class="tier-button" data-tier="2">Tier 2<br>6 Bays</div>
                </div>
                <div class="info-box">
                    <p>Each tier adds:</p>
                    <ul style="margin-left: 20px; margin-top: 5px;">
                        <li>+2 bays (double capacity)</li>
                        <li>+R500 Lights & Water</li>
                        <li>+R500 Supplies</li>
                        <li>+2 employees</li>
                    </ul>
                </div>
            </div>

            <div class="info-box" style="margin-top: 20px;">
                <p><span class="highlight">Note:</span> Salary is calculated as R3000 fixed + R10 per car washed</p>
                <p>Total cars per day = Bays × Cars per bay</p>
            </div>
        </div>

        <!-- Right: Results Panel -->
        <div class="results-panel">
            <div class="panel-title">FINANCIAL ANALYSIS</div>

            <div class="financial-grid">
                <!-- Startup Costs -->
                <div class="financial-section">
                    <div class="section-title">STARTUP COSTS</div>
                    <div class="cost-item">
                        <span class="cost-label">Business Registration</span>
                        <span class="cost-amount" id="cost-registration">R1,500</span>
                    </div>
                    <div class="cost-item">
                        <span class="cost-label">Machinery (2x Washers, 2x Vacuum)</span>
                        <span class="cost-amount" id="cost-machinery">R10,000</span>
                    </div>
                    <div class="cost-item">
                        <span class="cost-label">Supplies</span>
                        <span class="cost-amount" id="cost-equipment">R1,500</span>
                    </div>
                    <div class="cost-item">
                        <span class="cost-label">Marketing Launch</span>
                        <span class="cost-amount" id="cost-marketing">R1,000</span>
                    </div>
                    <div class="cost-item">
                        <span class="cost-label">Storage Wendy House</span>
                        <span class="cost-amount" id="cost-storage">R5,000</span>
                    </div>
                    <div class="cost-item">
                        <span class="cost-label">Shade Netting</span>
                        <span class="cost-amount" id="cost-netting">R2,000</span>
                    </div>
                    <div class="cost-total">
                        <span class="total-label">TOTAL STARTUP COST</span>
                        <span class="total-amount" id="total-startup">R21,000</span>
                    </div>
                </div>

                <!-- Monthly Costs -->
                <div class="financial-section">
                    <div class="section-title">MONTHLY OPERATING COSTS</div>
                    <div class="cost-item">
                        <span class="cost-label">Rent</span>
                        <span class="cost-amount" id="cost-rent">R5,000</span>
                    </div>
                    <div class="cost-item">
                        <span class="cost-label">Lights & Water</span>
                        <span class="cost-amount" id="cost-utilities">R1,500</span>
                    </div>
                    <div class="cost-item">
                        <span class="cost-label">Supplies</span>
                        <span class="cost-amount" id="cost-supplies">R2,000</span>
                    </div>
                    <div class="cost-item">
                        <span class="cost-label">Employee Salaries</span>
                        <span class="cost-amount" id="cost-salary">R4,800</span>
                    </div>
                    <div class="cost-item">
                        <span class="cost-label">Insurance</span>
                        <span class="cost-amount" id="cost-insurance">R1,000</span>
                    </div>
                    <div class="cost-item">
                        <span class="cost-label">Marketing & Fees</span>
                        <span class="cost-amount" id="cost-fees">R1,000</span>
                    </div>
                    <div class="cost-total">
                        <span class="total-label">TOTAL MONTHLY COST</span>
                        <span class="total-amount" id="total-monthly">R15,300</span>
                    </div>
                </div>
            </div>

            <!-- Revenue & Profit -->
            <div class="profit-display">
                <div class="profit-title">PROFIT & LOSS PROJECTION</div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div style="background: rgba(40, 50, 80, 0.6); padding: 15px; border-radius: 8px;">
                        <div style="color: #b8ab8c; font-size: 0.9rem;">Monthly Revenue</div>
                        <div style="color: #4caf50; font-size: 1.8rem; font-weight: bold;" id="monthly-revenue">R36,000</div>
                        <div style="color: #b8ab8c; font-size: 0.8rem; margin-top: 5px;" id="revenue-detail">
                            8 cars/day × R150 × 30 days
                        </div>
                    </div>
                    <div style="background: rgba(40, 50, 80, 0.6); padding: 15px; border-radius: 8px;">
                        <div style="color: #b8ab8c; font-size: 0.9rem;">Monthly Costs</div>
                        <div style="color: #ff5252; font-size: 1.8rem; font-weight: bold;" id="monthly-costs">R15,300</div>
                        <div style="color: #b8ab8c; font-size: 0.8rem; margin-top: 5px;">
                            All operating expenses
                        </div>
                    </div>
                </div>

                <div class="profit-grid">
                    <div class="profit-item">
                        <div class="profit-period">WEEKLY PROFIT</div>
                        <div class="profit-amount" id="weekly-profit">R5,175</div>
                        <div style="color: #b8ab8c; font-size: 0.8rem; margin-top: 5px;">
                            (Monthly ÷ 4.33)
                        </div>
                    </div>
                    <div class="profit-item">
                        <div class="profit-period">MONTHLY PROFIT</div>
                        <div class="profit-amount" id="monthly-profit">R20,700</div>
                        <div style="color: #b8ab8c; font-size: 0.8rem; margin-top: 5px;">
                            Revenue - Costs
                        </div>
                    </div>
                    <div class="profit-item">
                        <div class="profit-period">BREAK-EVEN POINT</div>
                        <div class="profit-amount" id="break-even">1.01 months</div>
                        <div style="color: #b8ab8c; font-size: 0.8rem; margin-top: 5px;">
                            Startup ÷ Monthly Profit
                        </div>
                    </div>
                    <div class="profit-item">
                        <div class="profit-period">YEARLY PROFIT</div>
                        <div class="profit-amount" id="yearly-profit">R248,400</div>
                        <div style="color: #b8ab8c; font-size: 0.8rem; margin-top: 5px;">
                            Monthly × 12
                        </div>
                    </div>
                </div>
            </div>

            <!-- Detailed Calculations -->
            <div class="info-box" style="margin-top: 20px;">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div>
                        <div style="color: #b8ab8c; font-size: 0.9rem;">Cars per Day (Total)</div>
                        <div style="color: #ffd700; font-size: 1.1rem; font-weight: bold;" id="total-cars-day">16</div>
                        <div style="color: #b8ab8c; font-size: 0.8rem;">Bays × Cars per bay</div>
                    </div>
                    <div>
                        <div style="color: #b8ab8c; font-size: 0.9rem;">Cars per Month</div>
                        <div style="color: #ffd700; font-size: 1.1rem; font-weight: bold;" id="total-cars-month">480</div>
                        <div style="color: #b8ab8c; font-size: 0.8rem;">Daily × Operating days</div>
                    </div>
                    <div>
                        <div style="color: #b8ab8c; font-size: 0.9rem;">Employees Needed</div>
                        <div style="color: #ffd700; font-size: 1.1rem; font-weight: bold;" id="total-employees">2</div>
                        <div style="color: #b8ab8c; font-size: 0.8rem;">2 per 2 bays</div>
                    </div>
                    <div>
                        <div style="color: #b8ab8c; font-size: 0.9rem;">Salary per Car</div>
                        <div style="color: #ffd700; font-size: 1.1rem; font-weight: bold;" id="salary-per-car">R4,800</div>
                        <div style="color: #b8ab8c; font-size: 0.8rem;">R3000 + (R10 × cars)</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="controls">
        <button class="skyrim-button" id="export-report">
            <i class="fas fa-scroll"></i> Export Financial Report
        </button>
        <button class="skyrim-button" id="reset-calc">
            <i class="fas fa-redo"></i> Reset to Default
        </button>
        <button class="skyrim-button" id="save-scenario">
            <i class="fas fa-save"></i> Save This Scenario
        </button>
    </div>
</div>

<script>
  // Base costs (Tier 0 - 2 bays)
  const baseCosts = {
    startup: {
      registration: 1000,
      machinery: 7000,
      equipment: 2000,
      marketing: 1000,
      storage: 5000,
      netting: 2000
    },
    monthly: {
      rent: 5000,
      utilities: 1500,
      supplies: 1500,
      insurance: 1000,
      fees: 1000,
      salaryBase: 3000,
      salaryPerCar: 10
    }
  };

  // Expansion multipliers (per tier)
  const expansionMultipliers = {
    bays: 2, // Base bays
    utilitiesPerTier: 500,
    suppliesPerTier: 500,
    employeesPerTier: 2
  };

  // Current state
  let currentState = {
    tier: 0, // 0, 1, or 2
    bays: 2,
    carsPerBay: 8,
    pricePerCar: 150,
    operatingDays: 30,
    startupCostMultiplier: 1,
    monthlyCostMultiplier: 1
  };

  // DOM Elements
  const baysSlider = document.getElementById('bays-slider');
  const baysDisplay = document.getElementById('bays-display');
  const carsSlider = document.getElementById('cars-slider');
  const carsDisplay = document.getElementById('cars-per-day-display');
  const priceSlider = document.getElementById('price-slider');
  const daysSlider = document.getElementById('days-slider');
  const tierButtons = document.querySelectorAll('.tier-button');

  // Cost display elements
  const costRegistration = document.getElementById('cost-registration');
  const costMachinery = document.getElementById('cost-machinery');
  const costEquipment = document.getElementById('cost-equipment');
  const costMarketing = document.getElementById('cost-marketing');
  const costStorage = document.getElementById('cost-storage');
  const costNetting = document.getElementById('cost-netting');
  const totalStartup = document.getElementById('total-startup');

  const costRent = document.getElementById('cost-rent');
  const costUtilities = document.getElementById('cost-utilities');
  const costSupplies = document.getElementById('cost-supplies');
  const costSalary = document.getElementById('cost-salary');
  const costInsurance = document.getElementById('cost-insurance');
  const costFees = document.getElementById('cost-fees');
  const totalMonthly = document.getElementById('total-monthly');

  const monthlyRevenue = document.getElementById('monthly-revenue');
  const revenueDetail = document.getElementById('revenue-detail');
  const monthlyCosts = document.getElementById('monthly-costs');
  const weeklyProfit = document.getElementById('weekly-profit');
  const monthlyProfit = document.getElementById('monthly-profit');
  const yearlyProfit = document.getElementById('yearly-profit');
  const breakEven = document.getElementById('break-even');

  const totalCarsDay = document.getElementById('total-cars-day');
  const totalCarsMonth = document.getElementById('total-cars-month');
  const totalEmployees = document.getElementById('total-employees');
  const salaryPerCar = document.getElementById('salary-per-car');

  // Initialize
  function initializeCalculator() {
    updateAllCalculations();
    setupEventListeners();
    loadSavedScenario();
  }

  // Setup event listeners
  function setupEventListeners() {
    // Slider events
    baysSlider.addEventListener('input', function() {
      baysDisplay.textContent = this.value;
      currentState.bays = parseInt(this.value);
      updateAllCalculations();
    });

    carsSlider.addEventListener('input', function() {
      carsDisplay.textContent = this.value;
      currentState.carsPerBay = parseInt(this.value);
      updateAllCalculations();
    });

    priceSlider.addEventListener('input', function() {
      document.querySelector('.var-item:nth-child(3) .var-value').textContent = `R${this.value}`;
      currentState.pricePerCar = parseInt(this.value);
      updateAllCalculations();
    });

    daysSlider.addEventListener('input', function() {
      document.querySelector('.var-item:nth-child(4) .var-value').textContent = this.value;
      currentState.operatingDays = parseInt(this.value);
      updateAllCalculations();
    });

    // Tier button events
    tierButtons.forEach(button => {
      button.addEventListener('click', function() {
        tierButtons.forEach(btn => btn.classList.remove('active'));
        this.classList.add('active');

        currentState.tier = parseInt(this.dataset.tier);
        currentState.bays = 2 + (currentState.tier * 2);
        baysSlider.value = currentState.bays;
        baysDisplay.textContent = currentState.bays;

        updateAllCalculations();
      });
    });

    // Control button events
    document.getElementById('export-report').addEventListener('click', exportReport);
    document.getElementById('reset-calc').addEventListener('click', resetCalculator);
    document.getElementById('save-scenario').addEventListener('click', saveScenario);
  }

  // Update all calculations
  function updateAllCalculations() {
    // Calculate derived values
    const totalCarsPerDay = currentState.bays * currentState.carsPerBay;
    const totalCarsPerMonth = totalCarsPerDay * currentState.operatingDays;
    const employeesNeeded = 2 + (currentState.tier * 2);

    // Calculate startup costs
    const startupRegistration = baseCosts.startup.registration * currentState.startupCostMultiplier;
    const startupMachinery = baseCosts.startup.machinery * (1 + currentState.tier * 0.5); // More machinery for more bays
    const startupEquipment = baseCosts.startup.equipment * (1 + currentState.tier * 0.3);
    const startupMarketing = baseCosts.startup.marketing * currentState.startupCostMultiplier;
    const startupStorage = baseCosts.startup.storage * currentState.startupCostMultiplier;
    const startupNetting = baseCosts.startup.netting * (1 + currentState.tier * 0.4); // More netting for more bays

    const totalStartupCost = startupRegistration + startupMachinery + startupEquipment +
        startupMarketing + startupStorage + startupNetting;

    // Calculate monthly costs
    const monthlyRent = baseCosts.monthly.rent * (1 + currentState.tier * 0.2); // Slight rent increase
    const monthlyUtilities = baseCosts.monthly.utilities + (currentState.tier * expansionMultipliers.utilitiesPerTier);
    const monthlySupplies = baseCosts.monthly.supplies + (currentState.tier * expansionMultipliers.suppliesPerTier);
    const monthlyInsurance = baseCosts.monthly.insurance * (1 + currentState.tier * 0.2);
    const monthlyFees = baseCosts.monthly.fees * currentState.monthlyCostMultiplier;

    // Calculate salary: R3000 base per employee + R10 per car washed
    const monthlySalary = (employeesNeeded * baseCosts.monthly.salaryBase) +
        (totalCarsPerMonth * baseCosts.monthly.salaryPerCar);

    const totalMonthlyCost = monthlyRent + monthlyUtilities + monthlySupplies +
        monthlySalary + monthlyInsurance + monthlyFees;

    // Calculate revenue and profit
    const monthlyRevenueAmount = totalCarsPerMonth * currentState.pricePerCar;
    const monthlyProfitAmount = monthlyRevenueAmount - totalMonthlyCost;
    const weeklyProfitAmount = monthlyProfitAmount / 4.33; // Average weeks in month
    const yearlyProfitAmount = monthlyProfitAmount * 12;
    const breakEvenMonths = totalStartupCost / monthlyProfitAmount;

    // Update startup costs display
    costRegistration.textContent = `R${startupRegistration.toLocaleString()}`;
    costMachinery.textContent = `R${startupMachinery.toLocaleString()}`;
    costEquipment.textContent = `R${startupEquipment.toLocaleString()}`;
    costMarketing.textContent = `R${startupMarketing.toLocaleString()}`;
    costStorage.textContent = `R${startupStorage.toLocaleString()}`;
    costNetting.textContent = `R${startupNetting.toLocaleString()}`;
    totalStartup.textContent = `R${totalStartupCost.toLocaleString()}`;

    // Update monthly costs display
    costRent.textContent = `R${monthlyRent.toLocaleString()}`;
    costUtilities.textContent = `R${monthlyUtilities.toLocaleString()}`;
    costSupplies.textContent = `R${monthlySupplies.toLocaleString()}`;
    costSalary.textContent = `R${monthlySalary.toLocaleString()}`;
    costInsurance.textContent = `R${monthlyInsurance.toLocaleString()}`;
    costFees.textContent = `R${monthlyFees.toLocaleString()}`;
    totalMonthly.textContent = `R${totalMonthlyCost.toLocaleString()}`;

    // Update profit display
    monthlyRevenue.textContent = `R${monthlyRevenueAmount.toLocaleString()}`;
    revenueDetail.textContent = `${totalCarsPerDay} cars/day × R${currentState.pricePerCar} × ${currentState.operatingDays} days`;
    monthlyCosts.textContent = `R${totalMonthlyCost.toLocaleString()}`;

    // Color code profit
    weeklyProfit.textContent = `R${weeklyProfitAmount.toLocaleString()}`;
    weeklyProfit.className = weeklyProfitAmount >= 0 ? 'profit-amount' : 'profit-amount profit-negative';

    monthlyProfit.textContent = `R${monthlyProfitAmount.toLocaleString()}`;
    monthlyProfit.className = monthlyProfitAmount >= 0 ? 'profit-amount' : 'profit-amount profit-negative';

    yearlyProfit.textContent = `R${yearlyProfitAmount.toLocaleString()}`;
    yearlyProfit.className = yearlyProfitAmount >= 0 ? 'profit-amount' : 'profit-amount profit-negative';

    breakEven.textContent = breakEvenMonths > 0 ? `${breakEvenMonths.toFixed(2)} months` : "Never";

    // Update detailed calculations
    totalCarsDay.textContent = totalCarsPerDay;
    totalCarsMonth.textContent = totalCarsPerMonth.toLocaleString();
    totalEmployees.textContent = employeesNeeded;
    salaryPerCar.textContent = `R${monthlySalary.toLocaleString()}`;
  }

  // Export report
  function exportReport() {
    const report = generateReport();

    const blob = new Blob([report], { type: 'text/plain' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'car-wash-financial-report.txt';
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);

    // Visual feedback
    const button = document.getElementById('export-report');
    const originalHTML = button.innerHTML;
    button.innerHTML = '<i class="fas fa-check"></i> Exported!';
    button.style.background = 'linear-gradient(to bottom, #2193b0, #117b98)';

    setTimeout(() => {
      button.innerHTML = originalHTML;
      button.style.background = '';
    }, 1500);
  }

  // Generate report text
  function generateReport() {
    const totalCarsPerDay = currentState.bays * currentState.carsPerBay;
    const totalCarsPerMonth = totalCarsPerDay * currentState.operatingDays;
    const employeesNeeded = 2 + (currentState.tier * 2);

    let report = "=".repeat(60) + "\n";
    report += "SPARKLE & SHINE CAR WASH - FINANCIAL REPORT\n";
    report += "=".repeat(60) + "\n\n";

    report += "SCENARIO SETTINGS:\n";
    report += "-".repeat(40) + "\n";
    report += `Expansion Tier: ${currentState.tier + 1} (${currentState.bays} bays)\n`;
    report += `Cars per Bay per Day: ${currentState.carsPerBay}\n`;
    report += `Total Cars per Day: ${totalCarsPerDay}\n`;
    report += `Average Price per Car: R${currentState.pricePerCar}\n`;
    report += `Operating Days per Month: ${currentState.operatingDays}\n`;
    report += `Total Cars per Month: ${totalCarsPerMonth.toLocaleString()}\n`;
    report += `Employees Needed: ${employeesNeeded}\n\n`;

    report += "STARTUP COSTS:\n";
    report += "-".repeat(40) + "\n";
    report += `Business Registration: ${costRegistration.textContent}\n`;
    report += `Machinery: ${costMachinery.textContent}\n`;
    report += `Equipment: ${costEquipment.textContent}\n`;
    report += `Marketing Launch: ${costMarketing.textContent}\n`;
    report += `Storage Wendy House: ${costStorage.textContent}\n`;
    report += `Shade Netting: ${costNetting.textContent}\n`;
    report += `TOTAL STARTUP: ${totalStartup.textContent}\n\n`;

    report += "MONTHLY OPERATING COSTS:\n";
    report += "-".justify(40) + "\n";
    report += `Rent: ${costRent.textContent}\n`;
    report += `Lights & Water: ${costUtilities.textContent}\n`;
    report += `Supplies: ${costSupplies.textContent}\n`;
    report += `Employee Salaries: ${costSalary.textContent}\n`;
    report += `Insurance: ${costInsurance.textContent}\n`;
    report += `Marketing & Fees: ${costFees.textContent}\n`;
    report += `TOTAL MONTHLY: ${totalMonthly.textContent}\n\n`;

    report += "REVENUE & PROFIT PROJECTION:\n";
    report += "-".repeat(40) + "\n";
    report += `Monthly Revenue: ${monthlyRevenue.textContent}\n`;
    report += `Monthly Costs: ${monthlyCosts.textContent}\n`;
    report += `Monthly Profit: ${monthlyProfit.textContent}\n`;
    report += `Weekly Profit: ${weeklyProfit.textContent}\n`;
    report += `Yearly Profit: ${yearlyProfit.textContent}\n`;
    report += `Break-even Point: ${breakEven.textContent}\n\n`;

    report += "CALCULATION DETAILS:\n";
    report += "-".repeat(40) + "\n";
    report += `Monthly Revenue Formula: ${totalCarsPerDay} cars/day × R${currentState.pricePerCar} × ${currentState.operatingDays} days\n`;
    report += `Salary Formula: (${employeesNeeded} × R3000) + (${totalCarsPerMonth.toLocaleString()} cars × R10)\n`;
    report += `Expansion Costs: +R${expansionMultipliers.utilitiesPerTier} utilities, +R${expansionMultipliers.suppliesPerTier} supplies per tier\n\n`;

    report += "=".repeat(60) + "\n";
    report += "Generated: " + new Date().toLocaleString() + "\n";
    report += "=".repeat(60);

    return report;
  }

  // Reset calculator
  function resetCalculator() {
    if (confirm('Reset all values to default?')) {
      currentState = {
        tier: 0,
        bays: 2,
        carsPerBay: 8,
        pricePerCar: 150,
        operatingDays: 30,
        startupCostMultiplier: 1,
        monthlyCostMultiplier: 1
      };

      baysSlider.value = 2;
      baysDisplay.textContent = '2';
      carsSlider.value = 8;
      carsDisplay.textContent = '8';
      priceSlider.value = 150;
      daysSlider.value = 30;

      tierButtons.forEach(btn => btn.classList.remove('active'));
      tierButtons[0].classList.add('active');

      updateAllCalculations();

      // Visual feedback
      const button = document.getElementById('reset-calc');
      const originalHTML = button.innerHTML;
      button.innerHTML = '<i class="fas fa-check"></i> Reset!';
      button.style.background = 'linear-gradient(to bottom, #3a5f0b, #2a4f0b)';

      setTimeout(() => {
        button.innerHTML = originalHTML;
        button.style.background = '';
      }, 1500);
    }
  }

  // Save current scenario
  function saveScenario() {
    const scenario = {
      ...currentState,
      timestamp: new Date().toISOString(),
      name: `Scenario ${new Date().toLocaleDateString()}`
    };

    localStorage.setItem('carWashScenario', JSON.stringify(scenario));

    // Visual feedback
    const button = document.getElementById('save-scenario');
    const originalHTML = button.innerHTML;
    button.innerHTML = '<i class="fas fa-check"></i> Saved!';
    button.style.background = 'linear-gradient(to bottom, #3a5f0b, #2a4f0b)';

    setTimeout(() => {
      button.innerHTML = originalHTML;
      button.style.background = '';
    }, 1500);
  }

  // Load saved scenario
  function loadSavedScenario() {
    const saved = localStorage.getItem('carWashScenario');
    if (saved) {
      try {
        const scenario = JSON.parse(saved);

        // Only load if it's recent (last 30 days)
        const savedDate = new Date(scenario.timestamp);
        const today = new Date();
        const diffDays = Math.floor((today - savedDate) / (1000 * 60 * 60 * 24));

        if (diffDays <= 30) {
          currentState = { ...currentState, ...scenario };

          baysSlider.value = currentState.bays;
          baysDisplay.textContent = currentState.bays;
          carsSlider.value = currentState.carsPerBay;
          carsDisplay.textContent = currentState.carsPerBay;
          priceSlider.value = currentState.pricePerCar;
          daysSlider.value = currentState.operatingDays;

          tierButtons.forEach(btn => btn.classList.remove('active'));
          tierButtons[currentState.tier].classList.add('active');

          updateAllCalculations();
        }
      } catch (e) {
        console.error('Error loading saved scenario:', e);
      }
    }
  }

  // String prototype for formatting
  String.prototype.justify = function(length) {
    if (this.length >= length) return this.toString();
    const spaces = length - this.length;
    return this + '-'.repeat(spaces);
  };

  // Initialize on load
  document.addEventListener('DOMContentLoaded', initializeCalculator);
</script>
</body>
</html>